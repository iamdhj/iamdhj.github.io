(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=l(r(6)),i=r(11);r(46);var a=l(r(39)),s=l(r(42));function l(e){return e&&e.__esModule?e:{default:e}}var c={required:!0,message:"不能为空",trigger:"blur"},d=(0,n.Mix)({props:["title","paths"],data:function(){return{goodInfo:{id:"",name:"",img:"",price:"",desc:""},rules:{name:[c],img:[c],price:[(0,n.Mix)({},c,{pattern:/^\d+(\.\d{1,2})?$/,message:"价格不正确(最多两位小数)"})],desc:[c]}}},computed:{realTitle:function(){return this.title}},methods:{initInfo:function(e){var t=this.$store.getters[i.Getters.GOOD_INFO](e);e&&t?(this.goodInfo=(0,n.Mix)({},t),this.goodInfo.price=(0,n.ShowPrice)(t.price)):e&&this.$router.replace(this.paths.GOODS)},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.goodInfo.id,a=""!==r,s=a?o.default.EDIT_GOOD_INFO:o.default.ADD_GOOD_INFO,l=t.$store.getters[i.Getters.GOOD_INFO](r),c=(0,n.Mix)({},t.goodInfo);if(c.price=(0,n.SavePrice)(c.price),JSON.stringify(c)===JSON.stringify(l))return void t.$Modal.confirm({title:"内容没有修改",content:"是否返回商品列表页面",onOk:function(){t.$router.replace(t.paths.GOODS)}});t.$fetch(s,c).then(function(e){e.id;t.$store.commit(i.Mutations.ADD_GOOD_INFO,c),t.$Modal.confirm({title:(a?"编辑":"添加")+"成功",content:"是否返回商品列表页面?",onOk:function(){t.$router.replace(t.paths.GOODS)}})})}else t.$Message.error("请输入正确的数据")})}},created:function(){this.initInfo(this.$route.params.id)},beforeRouteUpdate:function(e,t,r){this.initInfo(e.params.id),r()},beforeRouteLeave:function(e,t,r){this.goodInfo={id:"",name:"",img:"",price:"",desc:""},r()},components:{"upload-image":s.default}},a.default);t.default=d},38:function(e,t,r){"use strict";function n(e,t){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],a=i[0],s={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}r.r(t),r.d(t,"default",function(){return m});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,d=function(){},u=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,r,o){c=r,u=o||{};var a=n(e,t);return h(a),function(t){for(var r=[],o=0;o<a.length;o++){var s=a[o];(l=i[s.id]).refs--,r.push(l)}t?h(a=n(e,t)):a=[];for(o=0;o<r.length;o++){var l;if(0===(l=r[o]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function h(e){for(var t=0;t<e.length;t++){var r=e[t],n=i[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(v(r.parts[o]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(v(r.parts[o]));i[r.id]={id:r.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function v(e){var t,r,n=document.querySelector("style["+f+'~="'+e.id+'"]');if(n){if(c)return d;n.parentNode.removeChild(n)}if(p){var o=l++;n=s||(s=g()),t=O.bind(null,n,o,!1),r=O.bind(null,n,o,!0)}else n=g(),t=function(e,t){var r=t.css,n=t.media,o=t.sourceMap;n&&e.setAttribute("media",n);u.ssrId&&e.setAttribute(f,t.id);o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}var b,I=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function O(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=I(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},39:function(e,t,r){"use strict";r.r(t);var n=r(1),o=Object(n.a)(null,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"cms-main-title"},[e._v(e._s(e.title))]),e._v(" "),r("Form",{ref:"goodInfo",staticClass:"cms-form",attrs:{model:e.goodInfo,rules:e.rules}},[r("FormItem",{attrs:{label:"名称","label-for":"name",prop:"name"}},[r("Input",{staticClass:"cms-form-input",attrs:{"element-id":"name",placeholder:"名称"},model:{value:e.goodInfo.name,callback:function(t){e.$set(e.goodInfo,"name",t)},expression:"goodInfo.name"}})],1),e._v(" "),r("FormItem",{attrs:{label:"图片","label-for":"image",prop:"img"}},[r("upload-image",{attrs:{accept:"image/*"},model:{value:e.goodInfo.img,callback:function(t){e.$set(e.goodInfo,"img",t)},expression:"goodInfo.img"}})],1),e._v(" "),r("FormItem",{attrs:{label:"价格","label-for":"price",prop:"price"}},[r("Input",{staticClass:"cms-form-input",attrs:{"element-id":"price",placeholder:"价格"},model:{value:e.goodInfo.price,callback:function(t){e.$set(e.goodInfo,"price",t)},expression:"goodInfo.price"}})],1),e._v(" "),r("FormItem",{attrs:{label:"描述","label-for":"desc",prop:"desc"}},[r("Input",{staticClass:"cms-form-input",attrs:{type:"textarea","element-id":"desc",placeholder:"描述"},model:{value:e.goodInfo.desc,callback:function(t){e.$set(e.goodInfo,"desc",t)},expression:"goodInfo.desc"}})],1),e._v(" "),r("FormItem",[r("Button",{on:{click:function(t){e.submit("goodInfo")}}},[e._v("确定")])],1)],1)],1)},[],!1,null,null,null);t.default=o.exports},42:function(e,t,r){"use strict";r.r(t);var n={name:"UploadImage",props:{value:String,accept:String},data:()=>({dataUrl:""}),methods:{onChange(e){let t=e.target.files;if(!t||!t[0])return;let r=t[0];1048576<r.size&&this.$log("图片不能大于1M");let n=new FileReader;n.readAsDataURL(r),n.onloadend=(()=>{n.error?this.$log("upload-image read error"):(this.dataUrl=n.result,this.$emit("input",this.dataUrl))})}}},o=r(1);var i=function(e){r(44)},a=Object(o.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("label",[t("img",{attrs:{src:this.dataUrl,alt:""}}),this._v(" "),t("input",{attrs:{type:"file",accept:this.accept},on:{change:this.onChange}})])},[],!1,i,"data-v-1716bd12",null);t.default=a.exports},43:function(e,t,r){(e.exports=r(2)(!1)).push([e.i,"img[data-v-1716bd12]{display:inline-block;width:200px;height:200px;border-radius:5px;background:#ccc;-o-object-fit:cover;object-fit:cover}input[data-v-1716bd12]{display:none}",""])},44:function(e,t,r){var n=r(43);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(38).default)("1143ced2",n,!0,{})},45:function(e,t,r){(e.exports=r(2)(!1)).push([e.i,"",""])},46:function(e,t,r){var n=r(45);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,o);n.locals&&(e.exports=n.locals)}}]);